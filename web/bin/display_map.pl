#
# Return a set of maps of a given x,y location
#
# Call like this:  http://localhost:8080/bin/display_map.pl?$x&$y&$text
#
# Example at:  http://misterhouse.net:8080/aprs
# Generated by mh/code/bruce/tracking_aprs.pl
#

# Authority: anyone

my ( $x, $y, $text ) = @ARGV;

$text =~ s/ +/ /g;

#y ($text2) = $text =~ /the +(\S+ +is +.+)/;
my ($text2) = $text =~ /the +(\S+)/;

# pre 1/2004: http://www.vicinity.com/gif?&CT=44.079865%3A-92.499625%3A20000&FAM=myblast&W=300&H=300
#     2/2004: http://maps.aprsworld.net/mapserver/map.php?lat=44.08183&lon=-92.50450&label=car&scale=town

my ( $u1, $u2 );
$u1 = qq|http://www.vicinity.com/gif?&CT=$y\%3A$x\%3A|;

#u2 = qq|&FAM=myblast&W=600&H=350|;
$u2 = qq|&FAM=myblast&W=300&H=300|;

$u1 =
  qq|http://maps.aprsworld.net/mapserver/map.php?lat=$y&lon=$x&label=$text2|;

my $html = "<p><b>$text</b></p>\n";

#$html .= "<img src='${u1}5000$u2'</img>\n";
#$html .= "<img src='${u1}20000$u2'</img>\n";
#$html .= "<img src='${u1}100000$u2'</img>\n";
#$html .= "<img src='${u1}1000000$u2'</img>\n";

$html .= "<img src='${u1}&scale=street'</img>\n";
$html .= "<img src='${u1}&scale=town'</img>\n";
$html .= "<img src='${u1}&scale=county'</img>\n";
$html .= "<img src='${u1}&scale=regional'</img>\n";

return &html_page( '', $html );

